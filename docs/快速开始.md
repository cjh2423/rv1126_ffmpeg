# RV1126 Demo 快速开始指南

本文档介绍如何编译和运行本项目的演示程序。

## 1. 环境准备

确保您已经按照 `docs/FFmpeg获取指导.md` 完成了 FFmpeg 的交叉编译和安装。

- **交叉编译工具链**: `arm-rockchip830-linux-gnueabihf`
- **第三方库**: FFmpeg (位于 `3rdparty/ffmpeg_install`)

## 2. 编译项目

在项目根目录下执行编译脚本：

```bash
./build.sh
```

编译成功后，可执行文件将生成在 `build/rv_demo`。

## 3. 部署到开发板

假设开发板 IP 为 `192.168.1.10`，目标路径为 `/userdata/demo`。

### 3.1 准备目录

```bash
ssh root@192.168.1.10 "mkdir -p /userdata/demo/lib"
```

### 3.2 上传文件

**上传可执行文件：**
```bash
scp build/rv_demo root@192.168.1.10:/userdata/demo/
```

**上传依赖库 (只需一次)：**
```bash
# 将 FFmpeg 的动态库上传到板子
scp -r 3rdparty/ffmpeg_install/lib/* root@192.168.1.10:/userdata/demo/lib/
```

## 4. 运行程序

登录开发板并执行：

```bash
ssh root@192.168.1.10
cd /userdata/demo

# 设置库路径 (重要！)
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/userdata/demo/lib

# 给执行权限并运行
chmod +x rv_demo
./rv_demo
```

## 5. 预期输出

如果一切正常，您将看到如下日志：

```text
Hello World from C Language!
This runs on RV1126 with standard libraries.
FFmpeg Integration Test:
  - AvFormat Version: 60.16.100
  - AvCodec Version:  60.31.102
FFmpeg init successful!

=== Starting Video Capture Test ===
Config: /dev/video0, 1920x1080 @ 30 fps
Capture device init success: /dev/video0 (1920x1080 @ 30 fps)
Capture started, running for approx 150 frames...
[Capture] Frame 30: 1920x1080, Format: 4, Size: 3110400 bytes, TS: ...
[Capture] Frame 60: 1920x1080, Format: 4, Size: 3110400 bytes, TS: ...
...
Stopping capture...
Test finished.
```

## 6. 配置修改

您可以修改 `include/common/config.h` 来调整分辨率、帧率或设备节点，然后重新编译即可。
